@import "tailwindcss";
@plugin "@tailwindcss/forms";
@plugin '@tailwindcss/typography';
@source '../node_modules/pliny';
@custom-variant dark (&:where(.dark, .dark *));

/* Core theme configuration */
@theme {
	/* Font families */
	--font-sans:
		var(--font-sans), ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
		"Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

	--font-heading: var(--font-heading), var(--font-sans), sans-serif;
	--font-mono: var(--font-mono), ui-monospace, SFMono-Regular, monospace;

	/* ✨ Primary - Crimson Ritual */
	--color-primary-50: oklch(0.97 0.01 25);
	--color-primary-100: oklch(0.95 0.02 25);
	/* faded rose */
	--color-primary-200: oklch(0.9 0.04 25);
	--color-primary-300: oklch(0.8 0.05 25);
	/* dry blood */
	--color-primary-400: oklch(0.72 0.09 25);
	--color-primary-500: oklch(0.65 0.14 25);
	/* deep crimson */
	--color-primary-600: oklch(0.56 0.16 25);
	--color-primary-700: oklch(0.5 0.15 25);
	/* leather red */
	--color-primary-800: oklch(0.42 0.13 25);
	--color-primary-900: oklch(0.35 0.12 25);
	/* scab red */
	--color-primary-950: oklch(0.28 0.1 25);

	/* 🌕 Accent - Gold (optional, for hover or highlights) */
	--color-accent-100: oklch(0.95 0.02 85);
	--color-accent-300: oklch(0.8 0.05 85);
	--color-accent-500: oklch(0.72 0.1 85);
	/* candle gold */
	--color-accent-700: oklch(0.6 0.11 85);
	/* ritual brass */
	--color-accent-900: oklch(0.45 0.1 85);

	/* 🕯 Grayscale - adjusted to feel darker, richer */
	--color-gray-50: oklch(0.985 0.002 247.839);
	--color-gray-100: oklch(0.967 0.003 264.542);
	--color-gray-200: oklch(0.928 0.006 264.531);
	--color-gray-300: oklch(0.872 0.01 258.338);
	--color-gray-400: oklch(0.707 0.022 261.325);
	--color-gray-500: oklch(0.551 0.027 264.364);
	--color-gray-600: oklch(0.446 0.03 256.802);
	--color-gray-700: oklch(0.373 0.034 259.733);
	--color-gray-800: oklch(0.278 0.033 256.848);
	--color-gray-900: oklch(0.15 0.02 265);
	/* darker charcoal */
	--color-gray-950: oklch(0.09 0.01 265);
	/* black stone */

	/* 🌃 Synthwave Color Palette */
	--color-synthwave-pink: #ff3860;
	--color-synthwave-cyan: #00ffff;
	--color-synthwave-purple: #8b5cf6;
	--color-synthwave-green: #00ff99;
	--color-synthwave-orange: #ff8c00;
	--color-synthwave-magenta: #ff0080;
	--color-synthwave-yellow: #ffff00;

	/* Line heights */
	--line-height-11: 2.75rem;
	--line-height-12: 3rem;
	--line-height-13: 3.25rem;
	--line-height-14: 3.5rem;

	/* Z-index values */
	--z-60: 60;
	--z-70: 70;
	--z-80: 80;

	/* Shadows for glow effects */
	--shadow-synthwave-pink: 0 0 20px rgba(255, 56, 96, 0.5);
	--shadow-synthwave-cyan: 0 0 20px rgba(0, 255, 255, 0.5);
	--shadow-synthwave-green: 0 0 20px rgba(0, 255, 153, 0.5);
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {

	*,
	::after,
	::before,
	::backdrop,
	::file-selector-button {
		border-color: var(--color-gray-200, currentColor);
	}

	a,
	button {
		outline-color: var(--color-primary-500);
	}

	a:focus-visible,
	button:focus-visible {
		outline: 2px solid;
		border-radius: var(--radius-sm);
		outline-color: var(--color-primary-500);
	}

	/* Enhanced body styling for synthwave theme */
	body {
		background: linear-gradient(135deg, #000000 0%, #0a0a0a 25%, #000000 50%, #0a0a0a 75%, #000000 100%);
		background-attachment: fixed;
	}

	/* Smooth scroll behavior */
	html {
		scroll-behavior: smooth;
	}
}

@layer utilities {
	.prose {
		& a {
			color: var(--color-primary-500);

			&:hover {
				color: var(--color-primary-600);
			}

			& code {
				color: var(--color-primary-400);
			}
		}

		& :where(h1, h2) {
			font-weight: 700;
			letter-spacing: var(--tracking-tight);
		}

		& h3 {
			font-weight: 600;
		}

		& :where(code):not(pre code) {
			color: var(--color-indigo-500);
		}
	}

	.prose-invert {
		& a {
			color: var(--color-primary-500);

			&:hover {
				color: var(--color-primary-400);
			}

			& code {
				color: var(--color-primary-400);
			}
		}

		& :where(h1, h2, h3, h4, h5, h6) {
			color: var(--color-gray-100);
		}
	}

	/* ✨ Synthwave Glow Effects */
	.glow-text {
		text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
	}

	.glow-text-strong {
		text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor;
	}

	.glow-text-subtle {
		text-shadow: 0 0 5px currentColor;
	}

	.glow-pink {
		text-shadow: var(--shadow-synthwave-pink);
	}

	.glow-cyan {
		text-shadow: var(--shadow-synthwave-cyan);
	}

	.glow-green {
		text-shadow: var(--shadow-synthwave-green);
	}

	/* 🌃 Background Effects */
	.synthwave-grid {
		background-image:
			linear-gradient(rgba(255, 56, 96, 0.4) 1px, transparent 1px),
			linear-gradient(90deg, rgba(255, 56, 96, 0.4) 1px, transparent 1px);
		background-size: 50px 50px;
		transform: perspective(800px) rotateX(60deg);
		transform-origin: bottom;
	}

	.synthwave-grid-subtle {
		background-image:
			linear-gradient(rgba(255, 56, 96, 0.15) 1px, transparent 1px),
			linear-gradient(90deg, rgba(255, 56, 96, 0.15) 1px, transparent 1px);
		background-size: 60px 60px;
		transform: perspective(600px) rotateX(60deg);
		transform-origin: bottom;
	}

	.retro-scanlines {
		background: repeating-linear-gradient(0deg,
				transparent,
				transparent 2px,
				rgba(255, 56, 96, 0.03) 2px,
				rgba(255, 56, 96, 0.03) 4px);
	}

	/* 🔆 Border Glow Effects */
	.border-glow {
		box-shadow:
			0 0 20px rgba(255, 56, 96, 0.5),
			inset 0 0 20px rgba(255, 56, 96, 0.1);
	}

	.border-glow-cyan {
		box-shadow:
			0 0 20px rgba(0, 255, 255, 0.5),
			inset 0 0 20px rgba(0, 255, 255, 0.1);
	}

	.border-glow-green {
		box-shadow:
			0 0 20px rgba(0, 255, 153, 0.5),
			inset 0 0 20px rgba(0, 255, 153, 0.1);
	}

	.border-glow-subtle {
		box-shadow:
			0 0 10px rgba(255, 56, 96, 0.3),
			inset 0 0 10px rgba(255, 56, 96, 0.05);
	}

	/* 🎭 Gradient Overlays */
	.gradient-overlay-synthwave {
		background: linear-gradient(135deg,
				rgba(255, 56, 96, 0.1) 0%,
				transparent 25%,
				transparent 75%,
				rgba(0, 255, 255, 0.1) 100%);
	}

	.gradient-mesh {
		background:
			radial-gradient(circle at 20% 80%, rgba(255, 56, 96, 0.1) 0%, transparent 50%),
			radial-gradient(circle at 80% 20%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
			radial-gradient(circle at 40% 40%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
	}

	/* 🌊 Animation Effects */
	.animate-float {
		animation: float 6s ease-in-out infinite;
	}

	.animate-float-delayed {
		animation: float 6s ease-in-out infinite;
		animation-delay: 2s;
	}

	.animate-glow {
		animation: glow 2s ease-in-out infinite alternate;
	}

	.animate-pulse-slow {
		animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
	}

	.animate-spin-slow {
		animation: spin 8s linear infinite;
	}

	.animate-grid-move {
		animation: gridMove 20s linear infinite;
	}

	.animate-scanline {
		animation: scanline 2s ease-in-out;
	}

	/* 🎯 Interactive States */
	.hover-lift {
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.hover-lift:hover {
		transform: translateY(-8px);
	}

	.hover-glow:hover {
		text-shadow: 0 0 15px currentColor, 0 0 25px currentColor;
		transition: text-shadow 0.3s ease;
	}

	.hover-border-glow:hover {
		box-shadow:
			0 0 30px rgba(255, 56, 96, 0.6),
			inset 0 0 30px rgba(255, 56, 96, 0.15);
		transition: box-shadow 0.3s ease;
	}

	/* 📱 Responsive Utilities */
	.text-responsive-xl {
		font-size: clamp(2rem, 5vw, 4rem);
	}

	.text-responsive-lg {
		font-size: clamp(1.5rem, 4vw, 3rem);
	}

	.text-responsive-md {
		font-size: clamp(1.25rem, 3vw, 2rem);
	}
}

/* Original utilities preserved */
.task-list-item::before {
	@apply hidden;
}

.task-list-item {
	@apply list-none;
}

.footnotes {
	@apply mt-12 border-t border-gray-200 pt-8 dark:border-gray-700;
}

.data-footnote-backref {
	@apply no-underline;
}

.csl-entry {
	@apply my-5;
}

.no-scrollbar::-webkit-scrollbar {
	display: none;
}

.no-scrollbar {
	-ms-overflow-style: none;
	/* IE and Edge */
	scrollbar-width: none;
	/* Firefox */
}

/* https://stackoverflow.com/questions/61083813/how-to-avoid-internal-autofill-selected-style-to-be-applied */
input:-webkit-autofill,
input:-webkit-autofill:focus {
	transition:
		background-color 600000s 0s,
		color 600000s 0s;
}

.katex-display {
	overflow: auto hidden;
}

.content-header-link {
	opacity: 0;
	margin-left: -24px;
	padding-right: 4px;
}

.content-header:hover .content-header-link,
.content-header-link:hover {
	opacity: 1;
}

.linkicon {
	display: inline-block;
	vertical-align: middle;
}

/* ✨ Enhanced Keyframes */
@keyframes voidPulse {

	0%,
	100% {
		transform: scale(1);
		opacity: 0.6;
	}

	50% {
		transform: scale(1.2);
		opacity: 1;
	}
}

@keyframes float {

	0%,
	100% {
		transform: translateY(0px);
	}

	50% {
		transform: translateY(-20px);
	}
}

@keyframes glow {
	0% {
		text-shadow: 0 0 5px currentColor;
	}

	100% {
		text-shadow: 0 0 20px currentColor, 0 0 30px currentColor;
	}
}

@keyframes gridMove {
	0% {
		transform: perspective(800px) rotateX(60deg) translate(0, 0);
	}

	100% {
		transform: perspective(800px) rotateX(60deg) translate(50px, 50px);
	}
}

@keyframes scanline {
	0% {
		transform: translateX(-100%);
		opacity: 0;
	}

	50% {
		opacity: 1;
	}

	100% {
		transform: translateX(100%);
		opacity: 0;
	}
}

@keyframes borderGlow {

	0%,
	100% {
		box-shadow:
			0 0 20px rgba(255, 56, 96, 0.5),
			inset 0 0 20px rgba(255, 56, 96, 0.1);
	}

	50% {
		box-shadow:
			0 0 40px rgba(255, 56, 96, 0.8),
			inset 0 0 40px rgba(255, 56, 96, 0.2);
	}
}

@keyframes neonFlicker {

	0%,
	100% {
		opacity: 1;
	}

	50% {
		opacity: 0.8;
	}

	75% {
		opacity: 0.95;
	}
}

@keyframes doomPulse {

	0%,
	100% {
		text-shadow: 0 0 5px rgba(255, 56, 96, 0.5);
	}

	50% {
		text-shadow: 0 0 20px rgba(255, 56, 96, 0.8), 0 0 30px rgba(255, 56, 96, 0.4);
	}
}

@keyframes synthwaveScan {
	0% {
		transform: translateX(-100%);
	}

	100% {
		transform: translateX(100vw);
	}
}

/* Doom/Synthwave utility classes */
.font-doom {
	font-family: 'JetBrains Mono', monospace;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.1em;
}

.font-gothic {
	font-family: 'Unica One', cursive;
	font-weight: 400;
	text-transform: uppercase;
	letter-spacing: 0.05em;
}

.doom-glow {
	box-shadow: 0 0 20px rgba(255, 56, 96, 0.3), 0 0 40px rgba(255, 56, 96, 0.1);
}

.synthwave-glow {
	box-shadow: 0 0 15px var(--color-synthwave-cyan), 0 0 30px var(--color-synthwave-purple);
}

.doom-gradient {
	background: linear-gradient(135deg,
			oklch(0.08 0.04 25) 0%,
			oklch(0.04 0.01 265) 50%,
			oklch(0.08 0.04 25) 100%);
}

.animate-doom-pulse {
	animation: doomPulse 3s ease-in-out infinite;
}

.animate-synthwave-scan {
	animation: synthwaveScan 8s linear infinite;
}

.text-neon-cyan {
	color: var(--color-synthwave-cyan);
}

.text-neon-purple {
	color: var(--color-synthwave-purple);
}

.text-neon-yellow {
	color: var(--color-synthwave-yellow);
}

.text-neon-pink {
	color: var(--color-synthwave-pink);
}

.synthwave-grid {
	background-image:
		linear-gradient(var(--color-synthwave-cyan) 1px, transparent 1px),
		linear-gradient(90deg, var(--color-synthwave-cyan) 1px, transparent 1px);
	background-size: 20px 20px;
	opacity: 0.05;
}

@keyframes matrixRain {
	0% {
		transform: translateY(-100vh);
		opacity: 0;
	}

	10% {
		opacity: 1;
	}

	90% {
		opacity: 1;
	}

	100% {
		transform: translateY(100vh);
		opacity: 0;
	}
}

.animate-voidPulse {
	animation: voidPulse 8s ease-in-out infinite;
}

.animate-border-glow {
	animation: borderGlow 3s ease-in-out infinite;
}

.animate-neon-flicker {
	animation: neonFlicker 2s ease-in-out infinite;
}

.animate-matrix-rain {
	animation: matrixRain 3s linear infinite;
}

/* 🎨 Custom Scrollbar for Webkit */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: rgba(0, 0, 0, 0.8);
}

::-webkit-scrollbar-thumb {
	background: linear-gradient(180deg, #ff3860, #8b5cf6);
	border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
	background: linear-gradient(180deg, #ff0040, #9333ea);
}

/* 🌙 Dark theme enhancements */
.dark {
	/* Enhanced dark theme colors */
	--color-bg-primary: #000000;
	--color-bg-secondary: #0a0a0a;
	--color-text-primary: #ffffff;
	--color-text-secondary: #cccccc;
}

/* 🔥 Doom Metal Typography */
.font-gothic {
	font-family: var(--font-heading);
	font-weight: 700;
	letter-spacing: 0.1em;
	text-transform: uppercase;
}

.font-brutal {
	font-family: var(--font-mono);
	font-weight: 900;
	letter-spacing: 0.05em;
	text-transform: uppercase;
}

/* 🎵 Audio Visualizer Effect (decorative) */
.audio-bars {
	display: flex;
	align-items: flex-end;
	height: 30px;
	gap: 2px;
}

.audio-bar {
	width: 3px;
	background: linear-gradient(to top, #ff3860, #00ffff);
	border-radius: 1px;
	animation: audioWave 1s ease-in-out infinite;
}

.audio-bar:nth-child(1) {
	animation-delay: 0.1s;
}

.audio-bar:nth-child(2) {
	animation-delay: 0.2s;
}

.audio-bar:nth-child(3) {
	animation-delay: 0.3s;
}

.audio-bar:nth-child(4) {
	animation-delay: 0.4s;
}

.audio-bar:nth-child(5) {
	animation-delay: 0.5s;
}

@keyframes audioWave {

	0%,
	100% {
		height: 5px;
	}

	50% {
		height: 25px;
	}
}

/* 🎯 Focus states for accessibility */
.focus-synthwave:focus {
	outline: 2px solid #ff3860;
	outline-offset: 2px;
	box-shadow: 0 0 10px rgba(255, 56, 96, 0.5);
}

/* 🚀 Performance optimizations */
.will-change-transform {
	will-change: transform;
}

.will-change-opacity {
	will-change: opacity;
}

/* 📐 Layout utilities */
.aspect-synthwave {
	aspect-ratio: 16 / 9;
}

.aspect-album {
	aspect-ratio: 1 / 1;
}

/* 🎪 Special effects for interactive elements */
.hologram-effect {
	background: linear-gradient(45deg,
			transparent 30%,
			rgba(0, 255, 255, 0.1) 50%,
			transparent 70%);
	background-size: 200% 200%;
	animation: hologramShift 3s ease-in-out infinite;
}

@keyframes hologramShift {

	0%,
	100% {
		background-position: 0% 0%;
	}

	50% {
		background-position: 100% 100%;
	}
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}

@keyframes shimmer {
	0% {
		background-position: -200% 0;
	}

	100% {
		background-position: 200% 0;
	}
}

@keyframes scan {
	0% {
		transform: translateX(-100%);
	}

	100% {
		transform: translateX(200%);
	}
}

/* 🔮 Tzeentchian Chaos Effects - The Changer of Ways */
@keyframes tzeentchianMutation {
	0% {
		filter: hue-rotate(0deg) saturate(1.2) contrast(1.1);
		transform: scale(1);
	}

	12.5% {
		filter: hue-rotate(45deg) saturate(1.8) contrast(1.4);
		transform: scale(1.02);
	}

	25% {
		filter: hue-rotate(90deg) saturate(2.2) contrast(1.7);
		transform: scale(1.04);
	}

	37.5% {
		filter: hue-rotate(135deg) saturate(1.9) contrast(1.5);
		transform: scale(1.03);
	}

	50% {
		filter: hue-rotate(180deg) saturate(2.5) contrast(2);
		transform: scale(1.05);
	}

	62.5% {
		filter: hue-rotate(225deg) saturate(2.1) contrast(1.6);
		transform: scale(1.03);
	}

	75% {
		filter: hue-rotate(270deg) saturate(1.7) contrast(1.3);
		transform: scale(1.02);
	}

	87.5% {
		filter: hue-rotate(315deg) saturate(1.4) contrast(1.2);
		transform: scale(1.01);
	}

	100% {
		filter: hue-rotate(360deg) saturate(1.2) contrast(1.1);
		transform: scale(1);
	}
}

@keyframes chaosWarp {

	0%,
	100% {
		clip-path: circle(50% at 50% 50%);
	}

	16.67% {
		clip-path: ellipse(45% 55% at 52% 48%);
	}

	33.33% {
		clip-path: ellipse(55% 45% at 48% 52%);
	}

	50% {
		clip-path: ellipse(50% 50% at 50% 50%);
	}

	66.67% {
		clip-path: ellipse(48% 52% at 51% 49%);
	}

	83.33% {
		clip-path: ellipse(52% 48% at 49% 51%);
	}
}

@keyframes dimensionalRift {
	0% {
		box-shadow:
			inset 0 0 20px rgba(147, 51, 234, 0.3),
			0 0 40px rgba(236, 72, 153, 0.2);
	}

	25% {
		box-shadow:
			inset 0 0 30px rgba(236, 72, 153, 0.4),
			0 0 50px rgba(59, 130, 246, 0.3);
	}

	50% {
		box-shadow:
			inset 0 0 40px rgba(59, 130, 246, 0.5),
			0 0 60px rgba(16, 185, 129, 0.4);
	}

	75% {
		box-shadow:
			inset 0 0 35px rgba(16, 185, 129, 0.4),
			0 0 55px rgba(245, 158, 11, 0.3);
	}

	100% {
		box-shadow:
			inset 0 0 25px rgba(245, 158, 11, 0.3),
			0 0 45px rgba(147, 51, 234, 0.2);
	}
}

/* Tzeentchian Photo Effect Class */
.tzeentchian-photo {
	animation: tzeentchianMutation 12s ease-in-out infinite;
	position: relative;
}

.tzeentchian-photo::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background:
		radial-gradient(circle at 30% 20%, rgba(147, 51, 234, 0.15) 0%, transparent 50%),
		radial-gradient(circle at 70% 80%, rgba(236, 72, 153, 0.15) 0%, transparent 50%),
		radial-gradient(circle at 20% 70%, rgba(59, 130, 246, 0.12) 0%, transparent 50%);
	animation: chaosWarp 8s ease-in-out infinite;
	z-index: 1;
	pointer-events: none;
	mix-blend-mode: soft-light;
}

.tzeentchian-photo::after {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	animation: dimensionalRift 6s ease-in-out infinite;
	z-index: 2;
	pointer-events: none;
	border-radius: inherit;
}